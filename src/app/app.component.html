<div class="app-container">
  <nav>
    <app-navbar></app-navbar>
  </nav>
  <div class="main-container">
    <main class="center-y mt-4">
      <!-- Input -->
      <section class="section">
        <div class="input-container">
          <data-input (onWeightInput)="refreshData()"></data-input>
        </div>
      </section>
      <!-- Dashboard -->
      <section
        class="section"
        [ngClass]="{ 'dash-container': user.userStats.target.isOnTarget }"
      >
        <div class="container">
          <div class="header">
            <div class="d-flex align-items-center">
              <span
                class="text-white fs-5"
                [ngClass]="
                  user.userStats.target.isOnTarget
                    ? 'greenBackground'
                    : 'redBackground'
                "
              >
                {{ user.userStats.target.message }}
                <div
                  *ngIf="!user.userStats.target.isOnTarget"
                  class="text-white fs-5 fw-bold ms-2"
                >
                  {{ user.userStats.target.offTargetBy }}kg
                </div>
                <i
                  class="ms-2 fs-2"
                  [ngClass]="{
                    bi: true,
                    'bi-emoji-smile-fill': user.userStats.target.isOnTarget,
                    '': !user.userStats.target.isOnTarget
                  }"
                ></i>
              </span>
              <img
                *ngIf="user.userStats.target.isOnTarget"
                class="partyGif"
                src="../assets/Party2.gif"
                width="100px"
              />
              <img
                *ngIf="!user.userStats.target.isOnTarget"
                class="partyGif"
                src="../assets/u-got-this.gif"
                width="100px"
              />
            </div>
            <span
              [ngClass]="
                user.userStats.target.isOnTarget
                  ? 'greenBackground'
                  : 'redBackground'
              "
              class="fs-5"
              >{{ currentDate | date : "dd-MMM-yyyy"
              }}<i class="ms-2 bi bi-calendar3"></i
            ></span>
          </div>
          <app-dashboard></app-dashboard>
        </div>
      </section>
      <!-- Table -->
      <section class="section">
        <data-table
          data-bs-target="#myModal"
          data-bs-toggle="modal"
          (tableClickEvent)="openModal($event)"
        ></data-table>
      </section>
    </main>
  </div>

  <!-- The Modal -->
  <div class="modal" id="myModal" *ngIf="selectedWeightLog">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Modal Heading</h4>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            (click)="closeModal()"
          ></button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          {{ selectedWeightLog.date.getDate() }}/{{
            selectedWeightLog.date.getMonth()
          }}/{{ selectedWeightLog.date.getFullYear() }}
          <br />
          {{ selectedWeightLog.weight }}
          <br />
          {{ selectedWeightLog.bmi.bmi }}
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-danger"
            data-bs-dismiss="modal"
            (click)="closeModal()"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
  <router-outlet></router-outlet>
</div>
